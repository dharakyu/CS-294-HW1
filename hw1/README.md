# Build a QA Agent for a Wikidata Domain with Genie

In this homework, you will learn to use Genie and build a question-answering skill for a Wikidata domain of your choice. 
**Please sign up for the domain [here](https://docs.google.com/spreadsheets/d/1iibWKklrBbH6JD7vJfaMHyMbsipxHrFw6OlCoORdkhI/edit?usp=sharing)**. 
Each domain can have a maximum of 2 students. 
This is a group homework, students signed up for the same domain should work together and only submit one zip file at the end.

**Please start early and budget your time accordingly!** 
This homework requires generating a large dataset and training a large neural network. 
Simply running every command once may take more than 10 hours.

## Collecting Questions
You have chosen a domain you like, you must have a lot of interesting questions for this domain yourself! 
Please write down 20 questions (per student) you would ask for this domain. 

Unfortunately, with high probability, not all questions can be answered by the information 
available in Wikidata. Check the list of properties for your domain in [domains.md](./domains.md). 
(**Do not look at it before finishing the 20 questions.**)
Mark the questions that cannot be answered, and comment on why it can not be answered by Wikidata, put it 
in a spreadsheet ([an example](https://docs.google.com/spreadsheets/d/1PtCa3jnGEeUE-pnN2rK51T9VtQDMEyKWlvwCkyQrqqA/edit?usp=sharing)). 

Now you have an idea of what kind of information Wikidata has, come up with another 20 questions that can be answered by Wikidata. 
Put it in a file named `input.txt` with one question each line.
These 20 questions will serve as the evaluation set for your QA skill. 

## Setup

Install Genie toolkit and its dependencies using the following command:

```
git clone https://github.com/stanford-oval/thingtalk-units
cd thingtalk-units 
git checkout wip/area
yarn
yarn link
cd ..

git clone https://github.com/stanford-oval/thingtalk
cd thingtalk
yarn
yarn link
yarn link thingtalk-units

git clone https://github.com/stanford-oval/genie-toolkit
cd genie-toolkitgit checkout wip/wikidata-single-turn
yarn
yarn link thingtalk
yarn link thingtalk-units
```

## Testing Genie with Your Domain
Following the instructions in [`genie-toolkit/wikidata/README.md`](https://github.com/stanford-oval/genie-toolkit/blob/wip/wikidata-single-turn/starter/wikidata/README.md)
to test the quality of training data generated by Genie for your domain. 


## Running on Google Cloud Platform
This homework requires access to significant compute resources, 
including GPUs to train a neural network. 
To simplify that, all students will receive a Google Cloud Platform coupon. 
You should have received an email with instructions to redeem your coupon and apply it to your personal GCP account.

You will be responsible for creating and managing (starting, stopping) the VM instances used by this homework. 
**You will be billed while the instances are running** (and you will be responsible for charges beyond the coupon) 
so make sure you turn off any VM instance you are not using.

It is recommended to create a CPU+GPU instance, using an NVidia V100 GPU (~$2/hour)

We recommend using the Oregon (us-west-1) region, 
as it slightly cheaper and includes a larger set of available machine types, 
but any North American region should work.
See detailed instructions and a tutorial for GCP [here](./instructions/google-cloud.md).

